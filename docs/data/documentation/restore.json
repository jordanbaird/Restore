{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore"},{"type":"text","text":" is a convenient, easy to use package that allows you to snapshot the state of an object for later restoration. Start by creating a type that conforms to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject"},{"type":"text","text":" protocol, and decorating the properties you wish to include in snapshots with the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/Restorable"},{"type":"text","text":" property wrapper."}]},{"type":"codeListing","syntax":"swift","code":["class FavoriteFruits: RestorableObject {","    @Restorable var rank1 = \"Apple\"","    @Restorable var rank2 = \"Banana\"","    @Restorable var rank3 = \"Watermelon\"","}","let favorites = FavoriteFruits()"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Let’s say that somewhere down the line, “Banana” overtakes “Apple”, moving into "},{"type":"codeVoice","code":"rank1"},{"type":"text","text":". As an extra precaution, the judges want to save the current results in case a mistake was made. They do so using the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject\/takeSnapshot(withKey:)"},{"type":"text","text":" method. Now they are free to update the results."}]},{"type":"codeListing","syntax":"swift","code":["favorites.takeSnapshot(withKey: \"BackupResults\")","","favorites.rank1 = \"Banana\"","favorites.rank2 = \"Apple\""]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Later, they find out that a mistake was indeed made. The vote was miscounted, and the results are now invalid. Thankfully, they have the backup. Rather than having to go through each individual property and set their values back to their original states, they can simply call the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject\/restore(withKey:)"},{"type":"text","text":" method. Every property is set back to the way it was before the mistake was made. Crisis averted."}]},{"type":"codeListing","syntax":"swift","code":["favorites.restore(withKey: \"BackupResults\")","","print(favorites.rank1) \/\/ Prints \"Apple\"","print(favorites.rank2) \/\/ Prints \"Banana\""]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now, let’s say that the judges get a fancy new "},{"type":"codeVoice","code":"Counter"},{"type":"text","text":" object. It automatically tallies the results and stores them within itself. But they still want the people viewing the results to be able to access the results from the counter. To do this, they must use a computed property."}]},{"type":"codeListing","syntax":"swift","code":["class FavoriteFruits: RestorableObject {","    let counter = Counter()","    ","    var rank1: String { ","        counter.rank1 ","    }","    var rank2: String {","        counter.rank2","    }","    var rank3: String {","        counter.rank3","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This poses a problem, however, as computed properties don’t support property wrappers. Now they can’t mark their ranks as "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/Restorable"},{"type":"text","text":". Then one of the judges, who read the manual, remembered that they can add computed properties to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject\/references-4bbzk"},{"type":"text","text":" array, and they will still be included in snapshots and restorations. Again, crisis averted."}]},{"type":"codeListing","syntax":"swift","code":["class FavoriteFruits: RestorableObject {","    let counter = Counter()","","    var rank1: String { ","        counter.rank1 ","    }","    var rank2: String {","        counter.rank2","    }","    var rank3: String {","        counter.rank3","    }","    ","    var references: [Reference<FavoriteFruits>] {","        Reference(owner: self, name: \"rank1\", keyPath: \\.rank1)","        Reference(owner: self, name: \"rank2\", keyPath: \\.rank2)","        Reference(owner: self, name: \"rank3\", keyPath: \\.rank3)","    }","}"]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"name"},{"type":"text","text":" parameter in the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/Reference"},{"type":"text","text":" type’s initializer must be the same as the name of the property, or the property will not be saved."}]}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/restore"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Restore\/documentation\/Restore","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Take snapshots of an object’s state and later restore from them."}],"kind":"symbol","metadata":{"roleHeading":"Framework","externalID":"Restore","title":"Restore","symbolKind":"module","role":"collection","modules":[{"name":"Restore"}]},"hierarchy":{"paths":[[]]},"topicSections":[{"title":"Restorable Objects","identifiers":["doc:\/\/Restore\/documentation\/Restore\/RestorableObject","doc:\/\/Restore\/documentation\/Restore\/Identifier"]},{"title":"Saving and Restoring","identifiers":["doc:\/\/Restore\/documentation\/Restore\/Restorable","doc:\/\/Restore\/documentation\/Restore\/Reference","doc:\/\/Restore\/documentation\/Restore\/RestorationKey"]},{"title":"Snapshots and Properties","identifiers":["doc:\/\/Restore\/documentation\/Restore\/Snapshot","doc:\/\/Restore\/documentation\/Restore\/Properties"]},{"title":"Rarely Used","identifiers":["doc:\/\/Restore\/documentation\/Restore\/AnyReference"]}],"references":{"doc://Restore/documentation/Restore/Restorable":{"role":"symbol","title":"Restorable","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Restorable"}],"abstract":[{"type":"text","text":"A property wrapper type that enables the value it wraps to be included as part of snapshots"},{"type":"text","text":" "},{"type":"text","text":"taken by instances of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject"},{"type":"text","text":" types."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/Restorable","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Restorable"}],"url":"\/documentation\/restore\/restorable"},"doc://Restore/documentation/Restore/Reference":{"role":"symbol","title":"Reference","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Reference"}],"abstract":[{"type":"text","text":"A type that references an unwrapped property of a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject"},{"type":"text","text":" type."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/Reference","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Reference"}],"url":"\/documentation\/restore\/reference"},"doc://Restore/documentation/Restore/RestorableObject/references-4bbzk":{"defaultImplementations":1,"role":"symbol","title":"references","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"references"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"ReferenceType"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"An array of references to properties that cannot be wrapped with "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/Restorable"},{"type":"text","text":" wrappers."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject\/references-4bbzk","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/restore\/restorableobject\/references-4bbzk"},"doc://Restore/documentation/Restore/RestorationKey":{"role":"symbol","title":"RestorationKey","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"RestorationKey"}],"abstract":[{"type":"text","text":"A type that is used as a key to store values in a snapshot."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorationKey","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"RestorationKey"}],"url":"\/documentation\/restore\/restorationkey"},"doc://Restore/documentation/Restore/RestorableObject/takeSnapshot(withKey:)":{"role":"symbol","title":"takeSnapshot(withKey:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"takeSnapshot"},{"kind":"text","text":"("},{"kind":"externalParam","text":"withKey"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"RestorationKey","preciseIdentifier":"s:7Restore14RestorationKeyV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Snapshot","preciseIdentifier":"s:7Restore8SnapshotV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":">"}],"abstract":[{"type":"text","text":"Takes a snapshot of all the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/Restorable"},{"type":"text","text":"-wrapped properties of an instance"},{"type":"text","text":" "},{"type":"text","text":"and stores their values under the given key."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject\/takeSnapshot(withKey:)","kind":"symbol","type":"topic","url":"\/documentation\/restore\/restorableobject\/takesnapshot(withkey:)"},"doc://Restore/documentation/Restore":{"role":"collection","title":"Restore","abstract":[{"type":"text","text":"Take snapshots of an object’s state and later restore from them."}],"identifier":"doc:\/\/Restore\/documentation\/Restore","kind":"symbol","type":"topic","url":"\/documentation\/restore"},"doc://Restore/documentation/Restore/Identifier":{"role":"symbol","title":"Identifier","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Identifier"}],"abstract":[{"type":"text","text":"A type that identifies a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject"},{"type":"text","text":" instance."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/Identifier","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Identifier"}],"url":"\/documentation\/restore\/identifier"},"doc://Restore/documentation/Restore/AnyReference":{"role":"symbol","title":"AnyReference","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"AnyReference"}],"abstract":[{"type":"text","text":"A type-erased reference object that references an unwrapped property of a"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject"},{"type":"text","text":" type."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/AnyReference","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"AnyReference"}],"url":"\/documentation\/restore\/anyreference"},"doc://Restore/documentation/Restore/Properties":{"role":"symbol","title":"Properties","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Properties"}],"abstract":[{"type":"text","text":"A container for the restorable properties owned by an instance of a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject"},{"type":"text","text":" type."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/Properties","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Properties"}],"url":"\/documentation\/restore\/properties"},"doc://Restore/documentation/Restore/RestorableObject":{"role":"symbol","title":"RestorableObject","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"RestorableObject"}],"abstract":[{"type":"text","text":"A type that can be stored and restored from a snapshot."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"RestorableObject"}],"url":"\/documentation\/restore\/restorableobject"},"doc://Restore/documentation/Restore/Snapshot":{"role":"symbol","title":"Snapshot","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Snapshot"}],"abstract":[{"type":"text","text":"A type that holds the restorable properties of an instance of a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject"},{"type":"text","text":" type."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/Snapshot","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Snapshot"}],"url":"\/documentation\/restore\/snapshot"},"doc://Restore/documentation/Restore/RestorableObject/restore(withKey:)":{"role":"symbol","title":"restore(withKey:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"restore"},{"kind":"text","text":"("},{"kind":"externalParam","text":"withKey"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"RestorationKey","preciseIdentifier":"s:7Restore14RestorationKeyV"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Restores all the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Restore\/documentation\/Restore\/Restorable"},{"type":"text","text":"-wrapped properties of an instance to the"},{"type":"text","text":" "},{"type":"text","text":"values they contained when the snapshot with the given key was taken."}],"identifier":"doc:\/\/Restore\/documentation\/Restore\/RestorableObject\/restore(withKey:)","kind":"symbol","type":"topic","url":"\/documentation\/restore\/restorableobject\/restore(withkey:)"}}}